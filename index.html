<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/astro.svg" />
    <link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Merriweather+Sans&display=swap" rel="stylesheet">
    <title>QuantStack</title>
    <style>
      .footer-left {
        position: absolute;
        bottom: 2%;
        left: 2%;
      }
      .circle-img-big {
        width: 200px !important;
        height: 200px !important;
        border-radius: 50% !important;
        object-fit: cover !important;
        display: block !important;
        margin: 0 auto !important;
      }
    </style>
  </head>
  <body>
    <script type="module" src="/src/main.ts"></script>
    <div id="common" style="z-index: 2;">
      <div class="footer-left">
        <div style="font-family: Source Sans Pro, Helvetica, sans-serif;">
          <img alt="GitHub" src="src/images/github.svg" height="20px"/>
          <p style="display: inline; vertical-align: top; margin-left: 4px; font-size: 20px;">@anutosh491 @JohanMabille @QuantStack</p>
        </div>
      </div>
    </div>
    <div class="reveal">
		<div class="slides">

<section data-background-image="./cosmo_victory.png" data-background-opacity="0.1">
  <h1>xeus-cpp, the new C++ kernel for Jupyter</h1>
  <img src="/src/images/logo_scientific_computing.svg" alt="QuantStack Logo" class="title-logo">
</section>
<section>
  <h2>About</h2>
  <div class="two-column">
    <div class="column">
      <img src="src/images/Anutosh.png" alt="Anutosh profile picture" class="circle-img-big">
      <strong style="font-size: 1.5em">Anutosh Bhat</strong><br>
      <div style="text-align: left">
        Software engineer at QuantStack<br>
        Contributes to the xeus stack<br>
        Contributes to LLVM<br>
      </div>
    </div>
    <div class="column">
      <img src="src/images/Johan.png" alt="Johan profile picture" class="circle-img-big">
      <strong style="font-size: 1.5em">Johan Mabille</strong><br>
      <div style="text-align: left">
        Technical director at QuantStack<br>
        Jupyter Distinguished Contributor<br>
        Contributes to mamba and xtensor<br>
      </div>
    </div>
  </div>
</section>
<section>
  <h2 style="margin:0 0 1em 0; text-align:left;">
    Writing Jupyter Kernels (1/2)
  </h2>
  <div style="font-size:1.3em; line-height:1.6; text-align:left;">
    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      Before 2017
    </p>
    <ul style="margin:0 0 1.5em 2em; padding:0;">
      <li class="fragment fade-up">Write from scratch</li>
      <li class="fragment fade-up">Use the kernel wrapper approach</li>
    </ul>

    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      2017: release of xeus
    </p>
    <ul style="margin:0 0 0 2em; padding:0;">
      <li class="fragment fade-up">A modern C++ implementation of the Jupyter Kernel Protocol</li>
      <li class="fragment fade-up">Not a kernel, but a tool to make kernel</li>
    </ul>
  </div>
</section>
<section>
  <h2 style="margin:0 0 1em 0; text-align:left;">
    Writing Jupyter Kernels (2/2)
  </h2>
  <div style="font-size:1.3em; line-height:1.6; text-align:left;">
    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      After 2017: xeus-based kernels
    </p>
    <ul style="margin:0 0 1.5em 2em; padding:0;">
      <li class="fragment fade-up">xeus-python</li>
      <li class="fragment fade-up">xeus-sql, xeus-sqlite</li>
      <li class="fragment fade-up">xeus-cling, based on Cling, a C++ interpreter developped at the CERN</li>
    </ul>

    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      2022: split of xeus
    </p>
    <ul style="margin:0 0 0 2em; padding:0;">
      <li class="fragment fade-up">xeus: implementation of the Jupyter Kernel protocol with no middleware</li>
      <li class="fragment fade-up">xeus-zmq: ZMQ-based middleware for xeus</li>
      <li class="fragment fade-up">xeus-lite: emscripten-based middleware for xeus</li>
    </ul>
  </div>
</section>
<section>
  <h2 style="margin:0 0 1em 0; text-align:left;">
    The need for a new C++ kernel
  </h2>
  <div style="font-size:1.3em; line-height:1.6; text-align:left;">
    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      Limitations of Cling
    </p>
    <ul style="margin:0 0 0 2em; padding:0;">
      <li class="fragment fade-up">Based on an outdated version of Clang</li>
      <li class="fragment fade-up">Limited capabilities and compatibility with modern C++ features</li>
      <li class="fragment fade-up">Hard to maintain on all the platforms</li>
    </ul>
    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      xeus-cpp, based on Clang
    </p>
    <ul style="margin:0 0 0 2em; padding:0;">
      <li class="fragment fade-up">Recent versions of Clang incorporated REPL in their codebase</li>
      <li class="fragment fade-up">Extensible architecture based on plugins</li>
      <li class="fragment fade-up">Supports modern versions of C++, and many features (CUDA, python)</li>
    </ul>
  </div>
</section>
<section>
    <h1 style="font-size:4em; margin-bottom:0.4em; color:#d44; text-shadow:2px 2px #ffd;">🎉 LIVE DEMO 🎉</h1>
</section>
<section data-markdown>
  <textarea data-template>
    <h1 style="font-size: 3.5em; margin-bottom: 0.2em;">
      Xeus-Cpp-Lite
    </h1>

    <h2 class="fragment" style="font-size: 2em; font-weight: normal; margin-top: 0;">
      Xeus-Cpp + JupyterLite
    </h2>

    <div class="fragment" style="margin-top: 1em; font-size: 1.8em; color: #444;">
      Interpreting C++ in the Browser
    </div>
  </textarea>
</section>
<section data-markdown>
  <textarea data-template>
    <h1 style="font-size:3em; margin:0 0 .6em 0;">Xeus-Cpp-Lite</h1>

    <div style="max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:start;">
      <!-- Link banner -->
      <div style="grid-column:1 / -1;background:#f6f6ff;border:1px solid #e0e0ff;padding:1rem 1.25rem;border-radius:14px;text-align:center;">
        <div style="font-weight:600;margin-bottom:.5rem;">Yesterday’s talk: JupyterLite + Emscripten-Forge</div>
        <a href="https://isabelparedes.github.io/pydata2025/" target="_blank" style="display:inline-block;padding:.5rem 1rem;border-radius:10px;border:1px solid #c9ccff;text-decoration:none;color:#d44;">
          Slides here ↗
        </a>
      </div>

      <!-- Column 1 -->
      <div style="background:#fff;border:1px solid #eee;border-radius:16px;padding:1.5rem;box-shadow:0 6px 20px rgba(0,0,0,.06);min-height:200px;display:flex;flex-direction:column;justify-content:space-between;">
        <div style="font-size:1.1em;font-weight:700;margin-bottom:.6rem;">JupyterLite</div>
        <ul style="line-height:1.5;margin:0;">
          <li class="fragment">JupyterLab distribution in the browser</li>
          <li class="fragment">Powered by WebAssembly</li>
        </ul>
      </div>

      <!-- Column 2 -->
      <div style="background:#fff;border:1px solid #eee;border-radius:16px;padding:1.5rem;box-shadow:0 6px 20px rgba(0,0,0,.06);min-height:200px;display:flex;flex-direction:column;justify-content:space-between;">
        <div style="font-size:1.1em;font-weight:700;margin-bottom:.6rem;">Emscripten-Forge</div>
        <ul style="line-height:1.5;margin:0;">
          <li class="fragment">Emscripten + Conda-Forge</li>
          <li class="fragment">Compiling packages for the emscripten-wasm32 target</li>
        </ul>
      </div>
    </div>
  </textarea>
</section>

<section>
  <h3 style="font-size:2.2em; margin:0 0 1em 0; text-align:left;">
    Runtime Execution: Native vs Wasm
  </h3>

  <div style="font-size:1.3em; line-height:1.6; text-align:left;">

    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      Clang-Repl on Native Platforms
    </p>
    <ul style="margin:0 0 1.5em 2em; padding:0;">
      <li class="fragment fade-up">Uses LLVM’s ORC JIT for runtime compilation</li>
      <li class="fragment fade-up">Compiles code & executes directly from memory</li>
    </ul>

    <p class="fragment fade-up" style="font-weight:600; margin:0 0 .4em 0;">
      Clang-Repl in the Browser
    </p>
    <ul style="margin:0 0 0 2em; padding:0;">
      <li class="fragment fade-up">WebAssembly enforces a strict sandbox model</li>
      <li class="fragment fade-up">Can’t write or modify executable memory at runtime</li>
      <li class="fragment fade-up">Memory is separated into code and data (Harvard architecture)</li>
    </ul>

  </div>
</section>

<section>
  <h3 style="font-size:2.1em; margin:0 0 1em 0; text-align:left;">
    WASM backend for Clang-Repl
  </h3>

  <div style="font-size:1.15em; line-height:1.6; text-align:left;">

    <p class="fragment fade-up" style="margin:0 0 1em 0; font-size:1.02em;">
      LLVM 17 introduced a <strong>WASM-specific IncrementalExecutor</strong> that avoids LLVM's ORC JIT
    </p>

    <p class="fragment fade-up" style="margin:0 0 .8em 0; font-size:1.02em;">
      The new <strong>WasmIncrementalExecutor</strong> handles the wasm execution as follows:
    </p>

    <ul style="margin:0 0 0 2em; padding:0; font-size:0.9em;">
      <li class="fragment fade-up">Each REPL input is parsed into a <code>Partial Translation Unit (PTU)</code></li>
      <li class="fragment fade-up"><code>PTU</code> is lowered to <code>LLVM IR</code>, then compiled to a WASM object file</li>
      <li class="fragment fade-up">The object is linked with <code>wasm-ld</code> into a standalone binary (<code>incr_module_x.wasm</code>)</li>
      <li class="fragment fade-up">The side module is dynamically loaded with emscripten’s <code>dlopen</code>, extending the main module</li>
    </ul>

  </div>
</section>

<section>
  <h3 style="font-size:2.1em; margin:0 0 1em 0; text-align:left;">
    WASM backend for Clang-Repl
  </h3>

  <div style="font-size:1.15em; line-height:1.6; text-align:left;">

    <p class="fragment fade-up" style="margin:0 0 .8em 0; font-size:1.05em;">
      These modules:
    </p>

    <ul style="margin:0 0 1em 2em; padding:0; font-size:1.05em;">
      <li class="fragment fade-up">Share the same memory as the main <code>wasm</code> module</li>
      <li class="fragment fade-up">Resolve symbols from earlier cells <em>(cross-cell linking)</em></li>
      <li class="fragment fade-up">Mimic dynamic linking, even though <code>WASM</code> doesn’t support shared libraries traditionally</li>
    </ul>

    <p class="fragment fade-up" style="margin-top:1em; font-size:1.05em; font-weight:600; color:#333;">
      🚀 This model effectively turned <strong>Clang-Repl</strong> into a live REPL for WebAssembly, enabling <strong>dynamic incremental C++</strong> in the browser!
    </p>

  </div>
</section>

<section>
  <h3 style="font-size:2.2em; text-align:center;">
    Xeus-Cpp-Lite Configuration
  </h3>

  <div style="text-align:center;">
    <img src="src/images/xeus-cpp-lite-configuration.png"
         alt="Xeus-Cpp-Lite configuration diagram"
         style="max-width:85%;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.25);margin-top:1em;"
         class="fragment fade-up"/>
  </div>

  <p style="font-size:0.9em; color:#555; margin-top:0.6em;" class="fragment fade-up">
    Fig: Configuration flow for Xeus-Cpp-Lite in the browser
  </p>
</section>

<section data-markdown>
  <textarea data-template>
    <h1 style="font-size:4em; margin-bottom:0.4em; color:#d44; text-shadow:2px 2px #ffd;">🎉 LIVE DEMO 🎉</h1>

    <h2 class="fragment fade-up" style="font-size:2em; color:#444; margin-bottom:1em;">
      Try it out on your phone (Android 📱 or iOS 🍏)!
    </h2>

    <a href="https://compiler-research.org/xeus-cpp-wasm/lab/index.html" target="_blank"
       style="display:inline-block; font-size:1.5em; padding:0.8em 1.5em; border-radius:14px;
              background:#f6f6ff; border:2px solid #c9ccff; text-decoration:none; color:#d44;
              font-weight:700; box-shadow:0 6px 20px rgba(0,0,0,.1);"
       class="fragment fade-in">
      👉 Launch Xeus-Cpp-Lite in your Browser
    </a>
  </textarea>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.4em; font-weight:700; text-align:center; margin-bottom:0.6em;">
    Timeit Magic
  </h2>

  <!-- Image (timeit gif) -->
  <div style="text-align:center;">
    <img src="src/images/timeit_latest.gif"
         alt="Timeit magic demo"
         style="max-width:70%; max-height:auto; display:inline-block; margin:0 auto;
                border-radius:10px; box-shadow:0 8px 28px rgba(0,0,0,.25);" />
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.4em; font-weight:700; text-align:center; margin-bottom:0.4em;">
    Loading <span style="font-weight:800;">third-party/custom</span> libs
  </h2>

  <!-- Subtitle ribbon (smaller, lighter focus) -->
  <div style="max-width:700px;margin:0 auto 1.2em auto;">
    <div style="background:#7B2CF3;color:#fff;font-weight:600;text-align:center;
                padding:.5em 1em;border-radius:8px;font-size:1em;">
      1. Create a simple C++ module
    </div>
  </div>

  <!-- Large Code block (main focus) -->
  <div style="max-width:1500px;margin:0 auto;box-shadow:0 10px 28px rgba(0,0,0,.25);
              border-radius:8px; overflow:hidden; font-size:1.5em;">
    <pre><code class="language-cpp">
// custom_module.cpp
#include &lt;iostream&gt;

extern "C" {
  void my_custom_function() {
    std::cout &lt;&lt; "Hello from my_custom_function!" &lt;&lt; std::endl;
  }
}
    </code></pre>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.4em; font-weight:700; text-align:center; margin-bottom:0.4em;">
    Loading <span style="font-weight:800;">third-party/custom</span> libs
  </h2>

  <!-- Subtitle ribbon (smaller, lighter focus) -->
  <div style="max-width:1000px;margin:0 auto 1.2em auto;">
    <div style="background:#7B2CF3;color:#fff;font-weight:600;text-align:center;
                padding:.5em 1em;border-radius:8px;font-size:1em;">
      2. Compile it to a WebAssembly shared object
    </div>
  </div>

  <!-- Large Code block (main focus) -->
  <div style="max-width:1500px;margin:0 auto;box-shadow:0 10px 28px rgba(0,0,0,.25);
              border-radius:8px; overflow:hidden; font-size:1.8em;">
    <pre><code class="language-cpp">
emcc custom_module.cpp \
    -O2 \
    -s SIDE_MODULE=1 \
    -s WASM=1 \
    -fPIC \
    -o custom_module.so
    </code></pre>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.4em; font-weight:700; text-align:center; margin-bottom:0.6em;">
    Loading <span style="font-weight:800;">third-party/custom</span> libs
  </h2>

  <!-- Image (dlopen) -->
  <div style="text-align:center;">
    <img src="src/images/dlopen.png"
         alt="dlopen flow"
         style="max-width:90%; max-height:90vh; display:inline-block; margin:0 auto;
                border-radius:10px; box-shadow:0 8px 28px rgba(0,0,0,.25);" />
  </div>
</section>

<section>
  <!-- Title -->
  <h3 style="font-size:2.6em; margin:0 0 1em 0; text-align:left;">
    Near Future Work
  </h3>

  <!-- Bullet Points Wrapper with gray box -->
  <div style="background:#f5f5f5; padding:1.2em 1.5em; border-radius:8px;
              font-size:1.6em; line-height:1.8; text-align:left; max-width:80%;">
    <ul style="margin:0; padding-left:1.2em;">
      <li style="font-weight:600; margin:0 0 .8em 0;">
        Last Value Printing
      </li>
      <li style="font-weight:600; margin:0 0 .8em 0;">
        Debugger Support
      </li>
      <li style="font-weight:600; margin:0 0 .8em 0;">
        CUDA Support
      </li>
      <li style="font-weight:600; margin:0 0 .8em 0;">
        Python Interoperatability
      </li>
      <li style="font-weight:600; margin:0;">
        Multiple Interpreters
      </li>
    </ul>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.8em; font-weight:700; text-align:center; margin-bottom:0.6em;">
    Last Value Printing
  </h2>

  <!-- Image (last value gif) -->
  <div style="text-align:center;">
    <img src="src/images/last_value.gif"
         alt="Last Value Printing demo"
         style="width:80%; height:auto; display:block; margin:0 auto;
                border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,.35);" />
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.2em; font-weight:700; text-align:center; margin-bottom:0.8em;">
    Debugger Support
  </h2>

  <!-- Video -->
  <div style="text-align:center; padding-bottom:2em;">
    <video src="src/images/Debugger-Demo.mp4"
           controls autoplay loop muted playsinline preload="metadata"
           style="width:65%; height:auto; display:block; margin:0 auto;
                  border-radius:10px; box-shadow:0 8px 32px rgba(0,0,0,.35);" >
      Your browser does not support the video tag.
    </video>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.2em; font-weight:700; text-align:center; margin-bottom:0.8em;">
    CUDA Support
  </h2>

  <!-- Video (CUDA demo) -->
  <div style="text-align:center; padding-bottom:2em;">
    <video src="src/images/CUDA_Demo.mp4"
           controls
           autoplay
           loop
           muted
           playsinline
           style="width:75%; height:auto; display:block; margin:0 auto;
                  border-radius:10px; box-shadow:0 8px 32px rgba(0,0,0,.35);" >
      Your browser does not support the video tag.
    </video>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.2em; font-weight:700; text-align:center; margin-bottom:0.8em;">
    Python Interoperability
  </h2>

  <!-- Video (Cppyy demo) -->
  <div style="text-align:center; padding-bottom:2em;">
    <video src="src/images/Cppyy-Demo.mp4"
           controls
           autoplay
           loop
           muted
           playsinline
           style="width:75%; height:auto; display:block; margin:0 auto;
                  border-radius:10px; box-shadow:0 8px 32px rgba(0,0,0,.35);" >
      Your browser does not support the video tag.
    </video>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2.2em; font-weight:700; text-align:center; margin-bottom:0.8em;">
    Multiple Interpreters
  </h2>

  <!-- Video (Multiple Interpreter) -->
  <div style="text-align:center; padding-bottom:2em;">
    <video src="src/images/Multi-Interp.mp4"
           controls
           autoplay
           loop
           muted
           playsinline
           style="width:75%; height:auto; display:block; margin:0 auto;
                  border-radius:10px; box-shadow:0 8px 32px rgba(0,0,0,.35);" >
      Your browser does not support the video tag.
    </video>
  </div>
</section>

<section>
  <!-- Title -->
  <h2 style="font-size:2em; font-weight:700; text-align:center; margin-bottom:0.8em;">
    Acknowledgements
  </h2>

  <!-- Bullet-style thanks -->
  <div style="font-size:1.4em; text-align:center; margin-bottom:1.5em; color:#444; line-height:1.8;">
    <p><strong>Compiler Research Group</strong></p>
    <img src="src/images/compiler_research.png"
         alt="Compiler Research Group logo"
         style="max-width:260px; margin:0.5em auto 1em auto; display:block;" />

    <p><strong>Google Summer of Code</strong></p>
    <img src="src/images/gsoc.png"
         alt="Google Summer of Code logo"
         style="max-width:280px; margin:0.5em auto; display:block;" />
  </div>
</section>

<section>
  <!-- Title -->
  <h1 style="font-size:3em; font-weight:800; text-align:center; margin-bottom:0.3em;">
    The END
  </h1>

  <!-- Subtitle -->
  <h2 style="font-size:1.5em; font-weight:600; text-align:center; margin-bottom:0.7em; color:#444;">
    Questions?
  </h2>

  <!-- QR Code -->
  <div style="text-align:center; padding-top:1em;">
    <img src="src/images/qr.png"
         alt="QR code to slides"
         style="width:15%; height:auto; display:block; margin:0 auto;
                border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,.25);" />
    <p style="margin-top:0.8em; font-size:1.4em; color:#333; font-weight:500;">
      Scan for slides
    </p>
  </div>
</section>
      </div>
		</div>
  </body>
</html>
